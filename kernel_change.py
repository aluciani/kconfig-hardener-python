def update_config(options_to_set, options_to_unset, input_file, output_file):
    with open(input_file, 'r') as infile:
        lines = infile.readlines()

    for i, line in enumerate(lines):
        for option_set in options_to_set:
            if line.startswith(f'# {option_set} is not set'):
                lines[i] = f'{option_set}=y\n'

        for option_unset in options_to_unset:
            if line.startswith(f'{option_unset}=y') or line.startswith(f'{option_unset}=m'):                
                lines[i] = f'# {option_unset} is not set\n'

    with open(output_file, 'w') as outfile:
        outfile.writelines(lines)

if __name__ == '__main__':
    # List of options to set (change from "# CONFIG_... is not set" to "CONFIG_...=y")
    options_to_set = ['CONFIG_UBSAN','CONFIG_TCP_CONG_BBR','CONFIG_GCC_PLUGINS', 'CONFIG_RANDSTRUCT_FULL', 'CONFIG_BUG', 'CONFIG_SLUB_DEBUG', 'CONFIG_THREAD_INFO_IN_TASK', 'CONFIG_IOMMU_SUPPORT', 'CONFIG_STACKPROTECTOR', 'CONFIG_STACKPROTECTOR_STRONG', 'CONFIG_STRICT_KERNEL_RWX', 'CONFIG_STRICT_MODULE_RWX', 'CONFIG_REFCOUNT_FULL', 'CONFIG_INIT_STACK_ALL_ZERO', 'CONFIG_RANDOMIZE_BASE', 'CONFIG_VMAP_STACK', 'CONFIG_SPECULATION_MITIGATIONS', 'CONFIG_DEBUG_WX', 'CONFIG_WERROR', 'CONFIG_X86_MCE', 'CONFIG_RETPOLINE', 'CONFIG_SYN_COOKIES', 'CONFIG_MICROCODE', 'CONFIG_MICROCODE_INTEL', 'CONFIG_X86_SMAP', 'CONFIG_X86_UMIP', 'CONFIG_PAGE_TABLE_ISOLATION', 'CONFIG_RANDOMIZE_MEMORY', 'CONFIG_X86_KERNEL_IBT', 'CONFIG_CPU_SRSO', 'CONFIG_INTEL_IOMMU', 'CONFIG_BUG_ON_DATA_CORRUPTION', 'CONFIG_SCHED_STACK_END_CHECK', 'CONFIG_SLAB_FREELIST_HARDENED', 'CONFIG_SLAB_FREELIST_RANDOM', 'CONFIG_SHUFFLE_PAGE_ALLOCATOR', 'CONFIG_FORTIFY_SOURCE', 'CONFIG_DEBUG_LIST', 'CONFIG_DEBUG_VIRTUAL', 'CONFIG_DEBUG_SG', 'CONFIG_DEBUG_CREDENTIALS', 'CONFIG_DEBUG_NOTIFIERS', 'CONFIG_INIT_ON_ALLOC_DEFAULT_ON', 'CONFIG_STATIC_USERMODEHELPER', 'CONFIG_SCHED_CORE', 'CONFIG_KFENCE', 'CONFIG_RANDSTRUCT_FULL', 'CONFIG_HARDENED_USERCOPY', 'CONFIG_GCC_PLUGIN_LATENT_ENTROPY', 'CONFIG_INIT_ON_FREE_DEFAULT_ON', 'CONFIG_EFI_DISABLE_PCI_DMA', 'CONFIG_RESET_ATTACK_MITIGATION', 'CONFIG_UBSAN_BOUNDS', 'CONFIG_UBSAN_LOCAL_BOUNDS', 'CONFIG_UBSAN_TRAP', 'CONFIG_UBSAN_SANITIZE_ALL', 'CONFIG_GCC_PLUGIN_STACKLEAK', 'CONFIG_RANDOMIZE_KSTACK_OFFSET_DEFAULT', 'CONFIG_HW_RANDOM_TPM', 'CONFIG_IOMMU_DEFAULT_DMA_STRICT', 'CONFIG_INTEL_IOMMU_DEFAULT_ON', 'CONFIG_SLS', 'CONFIG_INTEL_IOMMU_SVM', 'CONFIG_LIST_HARDENED', 'CONFIG_RANDOM_KMALLOC_CACHES', 'CONFIG_SECURITY', 'CONFIG_SECURITY_YAMA', 'CONFIG_SECURITY_LANDLOCK', 'CONFIG_SECURITY_LOCKDOWN_LSM', 'CONFIG_SECURITY_LOCKDOWN_LSM_EARLY', 'CONFIG_LOCK_DOWN_KERNEL_FORCE_CONFIDENTIALITY', 'CONFIG_SECURITY_SELINUX', 'CONFIG_SECCOMP', 'CONFIG_SECCOMP_FILTER', 'CONFIG_BPF_UNPRIV_DEFAULT_OFF', 'CONFIG_STRICT_DEVMEM', 'CONFIG_X86_INTEL_TSX_MODE_OFF', 'CONFIG_SECURITY_DMESG_RESTRICT', 'CONFIG_IO_STRICT_DEVMEM', 'CONFIG_TRIM_UNUSED_KSYMS', 'CONFIG_X86_USER_SHADOW_STACK']

    # List of options to unset (change from "CONFIG_...=y" to "# CONFIG_... is not set")
    options_to_unset = ['CONFIG_UBSAN_SHIFT','CONFIG_UBSAN_BOOL','CONFIG_UBSAN_ENUM','CONFIG_BLK_DEV_UBLK','CONFIG_X86_AMD_PSTATE_UT','CONFIG_PERF_EVENTS_AMD_BRS','CONFIG_PERF_EVENTS_AMD_UNCORE','CONFIG_PERF_EVENTS_AMD_POWER','CONFIG_MODULE_FORCE_LOAD','CONFIG_DLM','CONFIG_AMD_IOMMU','CONFIG_BACKLIGHT_APPLE','CONFIG_DRM','CONFIG_AGP','CONFIG_MOUSE_PS2','CONFIG_INPUT_JOYSTICK','CONFIG_INPUT_TABLET','CONFIG_INPUT_TOUCHSCREEN','CONFIG_INPUT_MISC','CONFIG_MACINTOSH_DRIVERS','CONFIG_CDROM_PKTCDVD','CONFIG_PCCARD','CONFIG_NFC', 'CONFIG_AF_KCM','CONFIG_BT','CONFIG_CAN','CONFIG_HAMRADIO','CONFIG_ATALK','CONFIG_IPV6','CONFIG_KVM_AMD','CONFIG_X86_AMD_PSTATE','CONFIG_X86_ACPI_CPUFREQ_CPB', 'CONFIG_X86_POWERNOW_K8','CONFIG_X86_AMD_FREQ_SENSITIVITY','CONFIG_X86_SPEEDSTEP_CENTRINO','CONFIG_X86_P4_CLOCKMOD','CONFIG_EFI', 'CONFIG_AMD_NUMA', 'CONFIG_AMD_MEM_ENCRYPT', 'CONFIG_X86_5LEVEL', 'CONFIG_MICROCODE_AMD', 'CONFIG_X86_MCE_AMD', 'CONFIG_GART_IOMMU', 'CONFIG_DRM', 'CONFIG_RANDSTRUCT_PERFORMANCE', 'CONFIG_HARDENED_USERCOPY_FALLBACK', 'CONFIG_HARDENED_USERCOPY_PAGESPAN', 'CONFIG_STACKLEAK_METRICS', 'CONFIG_STACKLEAK_RUNTIME_DISABLE', 'CONFIG_IOMMU_DEFAULT_PASSTHROUGH', 'CONFIG_SLAB_MERGE_DEFAULT', 'CONFIG_SECURITY_SELINUX_DISABLE', 'CONFIG_SECURITY_SELINUX_BOOTPARAM', 'CONFIG_SECURITY_SELINUX_DEVELOP', 'CONFIG_SECURITY_WRITABLE_HOOKS', 'CONFIG_SECURITY_SELINUX_DEBUG', 'CONFIG_ACPI_CUSTOM_METHOD', 'CONFIG_COMPAT_BRK', 'CONFIG_DEVKMEM', 'CONFIG_INET_DIAG', 'CONFIG_KEXEC', 'CONFIG_PROC_KCORE', 'CONFIG_LEGACY_PTYS', 'CONFIG_HIBERNATION', 'CONFIG_COMPAT', 'CONFIG_IA32_EMULATION', 'CONFIG_X86_X32', 'CONFIG_X86_X32_ABI', 'CONFIG_MODIFY_LDT_SYSCALL', 'CONFIG_OABI_COMPAT', 'CONFIG_X86_MSR', 'CONFIG_LEGACY_TIOCSTI', 'CONFIG_DEVMEM', 'CONFIG_LDISC_AUTOLOAD', 'CONFIG_COMPAT_VDSO', 'CONFIG_X86_VSYSCALL_EMULATION', 'CONFIG_ZSMALLOC_STAT', 'CONFIG_PAGE_OWNER', 'CONFIG_DEBUG_KMEMLEAK', 'CONFIG_BINFMT_AOUT','CONFIG_BINFMT_MISC', 'CONFIG_KPROBE_EVENTS', 'CONFIG_UPROBE_EVENTS', 'CONFIG_GENERIC_TRACER', 'CONFIG_FUNCTION_TRACER', 'CONFIG_STACK_TRACER', 'CONFIG_HIST_TRIGGERS', 'CONFIG_BLK_DEV_IO_TRACE', 'CONFIG_PROC_VMCORE', 'CONFIG_PROC_PAGE_MONITOR', 'CONFIG_USELIB', 'CONFIG_CHECKPOINT_RESTORE', 'CONFIG_USERFAULTFD', 'CONFIG_HWPOISON_INJECT', 'CONFIG_MEM_SOFT_DIRTY', 'CONFIG_DEVPORT', 'CONFIG_DEBUG_FS', 'CONFIG_NOTIFIER_ERROR_INJECTION', 'CONFIG_FAIL_FUTEX', 'CONFIG_PUNIT_ATOM_DEBUG', 'CONFIG_ACPI_CONFIGFS', 'CONFIG_EDAC_DEBUG', 'CONFIG_DRM_I915_DEBUG', 'CONFIG_BCACHE_CLOSURES_DEBUG', 'CONFIG_DVB_C8SECTPFE', 'CONFIG_MTD_SLRAM', 'CONFIG_MTD_PHRAM', 'CONFIG_IO_URING', 'CONFIG_KCMP', 'CONFIG_RSEQ', 'CONFIG_LATENCYTOP', 'CONFIG_KCOV', 'CONFIG_PROVIDE_OHCI1394_DMA_INIT', 'CONFIG_SUNRPC_DEBUG', 'CONFIG_PTDUMP_DEBUGFS', 'CONFIG_DRM_LEGACY', 'CONFIG_FB', 'CONFIG_VT', 'CONFIG_BLK_DEV_FD', 'CONFIG_BLK_DEV_FD_RAWCMD', 'CONFIG_NOUVEAU_LEGACY_CTX_SUPPORT', 'CONFIG_STAGING', 'CONFIG_KSM', 'CONFIG_KALLSYMS', 'CONFIG_MAGIC_SYSRQ', 'CONFIG_KEXEC_FILE', 'CONFIG_USER_NS', 'CONFIG_X86_CPUID', 'CONFIG_X86_IOPL_IOPERM', 'CONFIG_ACPI_TABLE_UPGRADE', 'CONFIG_EFI_CUSTOM_SSDT_OVERLAYS', 'CONFIG_EFI_TEST', 'CONFIG_MMIOTRACE_TEST', 'CONFIG_KPROBES', 'CONFIG_BPF_SYSCALL', 'CONFIG_MMIOTRACE', 'CONFIG_LIVEPATCH', 'CONFIG_IP_DCCP', 'CONFIG_IP_SCTP', 'CONFIG_FTRACE', 'CONFIG_VIDEO_VIVID', 'CONFIG_INPUT_EVBUG', 'CONFIG_KGDB', 'CONFIG_AIO', 'CONFIG_CORESIGHT', 'CONFIG_XFS_SUPPORT_V4', 'CONFIG_COREDUMP', 'CONFIG_SMB_SERVER', 'CONFIG_CACHESTAT_SYSCALL', 'CONFIG_MPTCP', 'CONFIG_TLS', 'CONFIG_TIPC', 'CONFIG_BLK_DEV_WRITE_MOUNTED']

    input_config_file = './config'
    output_config_file = './new_config'

    update_config(options_to_set, options_to_unset, input_config_file, output_config_file)
